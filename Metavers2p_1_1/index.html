<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Le projet Golpex est une plateforme innovante qui permet aux utilisateurs de découvrir les mathématiques de manière ludique et interactive. En utilisant des éléments de jeu vidéo, les utilisateurs pourront s'immerger dans un univers où ils pourront résoudre des problèmes mathématiques et relever des défis stimulants.

Le but de Golpex est de rendre les mathématiques accessibles et amusantes pour tous les utilisateurs, qu'ils soient débutants ou experts. En utilisant une approche pédagogique basée sur le jeu, Golpex encourage l'apprentissage des mathématiques tout en offrant une expérience utilisateur immersive et divertissante.

Les fonctionnalités de la plateforme incluent des défis, des jeux et des quiz mathématiques, ainsi qu'un système de progression qui permet aux utilisateurs de suivre leur évolution et de relever des défis de plus en plus complexes. Golpex offre également des ressources pédagogiques pour aider les utilisateurs à comprendre les concepts mathématiques de base et à approfondir leur compréhension.

En somme, Golpex est une plateforme passionnante qui permet aux utilisateurs de s'engager dans l'apprentissage des mathématiques de manière amusante et interactive. Si vous êtes à la recherche d'une manière ludique d'apprendre les mathématiques, Golpex est la solution idéale pour vous." />
	<meta name="author" content="Guillaume FOUCAUD" />
		<!--<meta name="copyright" content="©" />-->

	<!--Afficher des icônes-->
	<script src="https://kit.fontawesome.com/b858757988.js" crossorigin="anonymous"></script>
	<title>Golpex p2.1.1</title>
	<link type="text/css" rel="stylesheet" href="style.css">
	<link type="image/png" rel="icon" href="favicon.png">

	<!--<script type="text/javascript" src="neuronNet.js"></script>-->
	<script type="text/javascript" src="SymbolAI.js"></script>

	<!--<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>-->
	

</head>
<body>
<div class="hero">

	<!--  ========================================== BACKGROUND ==========================================  -->
	
	<div class="backgroundGradient">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>


	<div id="renderer-main" data-inviewport="fade"></div>

	<div id="renderer-main-blur"></div>



	<!--  ========================================== NAVBAR ==========================================  -->

	<nav>
		<a href="#" class="logo">
			<img src="./logo.svg" width="30px"> <span class="name-golpex">Golpex</span>
		</a>
		<div class="nav-links">
			<ul>
				<script type="text/javascript">
					function getHeightOfElementById(id){
						const bodyRect = document.body.getBoundingClientRect();
						const element = document.getElementById(id);
						elemRect = element.getBoundingClientRect();
						offset = elemRect.top - bodyRect.top;
						return offset;
					}
				</script>
				
				<li><button onclick="window.scroll({
						top: getHeightOfElementById('header'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-house"></i><br>Acceuil</button></li>

				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section1'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-square-root-variable"></i><br>Calculateur</button></li>

				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section2'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-globe"></i><br>"Golpiverse"</button></li>

				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section3'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-bug"></i><br>Support</button></li><!--Support-->

				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section4'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-info"></i><br>Info</button></li>

				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section5'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-envelope"></i><br>Contact</button></li>
				<li><button onclick="window.scroll({
						top: getHeightOfElementById('section6'),
						behavior: 'smooth'
					});"><i class="fa-solid fa-list"></i><br>TierList</button></li>

			</ul>


		</div>
		<i class="fa-solid fa-bars menu-hamburger"></i>
	</nav>

	<!--  ========================================== HEADER ==========================================  -->

	<header id="header">
		<div class="div-centered column" data-inviewport="slide">
			<img src="./logo.svg" id="main-logo">
			<span class="name-golpex" style="font-size: 6em;">Golpex</span>
			<div class="padding">
				<h1 class="">Essayez les mathématiques<span class="text-orange"><br> libres</span> et <span class="text-orange">relaxantes</span></h1>
			</div>
		</div>
	</header>

	<!--  ========================================== SECTION 1 ==========================================  -->

	<main>
		<section id="section1" class="linear-gradient01">
			<h1 class="inactive">SECTION 1</h1>

			<div class="div-centered column" data-inviewport="slide">
				<div style="font-size:10em;cursor: pointer;">
						<i class="fa-solid fa-square-root-variable"></i>
				</div>

				<div class="div-centered row" style="max-height: 200px;">

					<div id="info-calculator">
						<i class="fa-solid fa-circle-info"></i>
						<div class="alt-info">
							<p> n = 5 : integer</p> <span class="text-orange">crée l'entier 5</span>
							<p> q = 5/4 : rational</p> <span class="text-orange">crée la fraction 5 / 4</span>
							<p> z = 5+4i : complex</p> <span class="text-orange">crée le complexe 5 + 4i</span>
							<p> n + m * (n + m)</p> <span class="text-orange">calcul avec les valeurs de n et m, n'utilisez que des variables définies et de même type!</span>
						</div>
						
					</div>
					
				
					<input type="search" class="search-bar" id="inputCalculator" placeholder="Peu utile pour l'instant"><!--onkeyup="handle(event)"-->


					<script type="module">
						import * as CalcAlgebr from'./CalculatorAlgebren.js';
						const calculator = document.getElementById('inputCalculator');
						calculator.addEventListener('keyup', CalcAlgebr.handler);
					</script>

				</div>


				<div class="padding" id="calcText">

					<div class="text-enlarge">Nombres complexes, Matrices, Polynômes...<br>
						Ici vous pouvez calculer une <span class="text-orange">variété d'objets</span>
					</div>

				</div>
				<div class="div-centered row margin">
					<div id="variableSpotAlgebren"><!--Ne rien mettre ici--></div>
					<div class="margin"></div>
					<div id="formulaSpotAlgebren"><!--Ne rien mettre ici--></div>
				</div>
				
				<div class="margin"></div>

			</div>
			
		</section>
		<section id="section2" class="linear-gradient02">
			
			<div class="div-centered column" data-inviewport="slide">
				
				<h1 class="inactive">SECTION 2</h1>



				<div class="div-centered row">
					<div id='canvasSpot01' class="canvas-container"></div>

					<div class="div-centered column">
						<div class="text-enlarge padding">
							Rejoignez un monde virtuel<br>
							pour pratiquer les maths en toute <span class="text-orange">liberté de créer</span>
						</div>
						<button class="worldActivation" onclick="
						world = document.getElementById('renderer-world');
						world.classList.toggle('worldActive');
						document.querySelector('nav').classList.add('hideNav');
						window.scroll({
							top: getHeightOfElementById('section2'),
							behavior: 'smooth'
						});
						">
							<i class="fa-solid fa-arrow-right"></i>
						</button>
						
					</div>

					<div id="renderer-world">
						<button class="worldDisactivation" onclick="
						world = document.getElementById('renderer-world');
						world.classList.toggle('worldActive');">
							<i class="fa-solid fa-arrow-left"></i>
						</button>
					</div>

				</div>
			


			</div>

			


		</section>
		<section id="section3" class="linear-gradient03">

			<div class="div-centered" data-inviewport="slide">
				<img src="fresquetd41.png" style="position: absolute;left: -50%;top: -50%; opacity: 0.2;z-index: -1;">
				<h1 class="inactive">SECTION 3</h1>


				<div class="div-centered row" style="backdrop-filter: blur(3px);">
					<div style="padding: 60px 30px;" class="div-centered column">
						<div class="text-enlarge">Vous avez trouvé un bug ?<br>
							Merci de le <span class="text-orange">signaler</span> ici 
						</div>
						<div class="text-enlarge"><i class="fa-solid fa-arrow-down"></i></div>
						<a style="font-size: 10em;" href="https://discord.gg/WnWpuHj5SA" target="_blank" title="Discord Server">
							<i class="fa-brands fa-discord"></i>
						</a>
					</div>
				</div>

			</div>
		</section>
		<section id="section4" class="linear-gradient04">
			<div class="div-centered" data-inviewport="slide">
				<h1 class="inactive">SECTION 4</h1>

				<div class="div-centered row">
					<div style="padding: 60px 30px;" class="div-centered column">
						<div class="">Ce projet a pour but de permettre<br> à n'importe qui de <span class="text-orange">créer en maths</span>.<br>
							Il s'adresse aussi bien aux non-initiés <br>qu'aux plus pointilleux du domaine.<br>
							<br>
							Aussi, le projet est pensé pour <span class="text-orange">durer dans l'avenir</span>,<br>et utilisera des technologies du web3<br>
							(IA, blockchain, VR, AR etc...)
						</div>
					</div>

					<div class="div-centered column">
						<div style="">
							<i class="fa-solid fa-circle-info"></i>
						</div>
					</div>
				</div>

			</div>
		</section>
		<section id="section5" class="linear-gradient05">
			<div class="div-centered" data-inviewport="slide">
				<h1 class="inactive">SECTION 5</h1>

				<div class="div-centered row">
					<div style="padding: 60px 30px;" class="div-centered column">
						<div class="text-enlarge">
							Me contacter :<br><br>
							<a href="https://discord.gg/WnWpuHj5SA" target="_blank" title="Discord Server">
								<i class="fa-brands fa-discord"></i> Le serveur Discord du projet
							</a><br>
							<a href="https://www.youtube.com/channel/UC3lRCtBb8ssim8FdTqZ-hug" target="_blank" title="Youtube's channel">
								<i class="fa-brands fa-youtube"></i> Ma chaîne Youtube
							</a> 
						</div>
					</div>
				</div>

			</div>
		</section>

		
		<section id="section6" class="linear-gradient06">
			
			<div class="div-centered" data-inviewport="slide">

				<div id="conteneur-tier-list" class="div-centered">
					<div id="boite" class="div-centered column">
						<canvas id="c"></canvas>
						<div class="div-centered row">
							
							<input type="text" placeholder="Entrez un nom (complet)" id="ajout" class="margin">
							<button onclick="ajt()" class="plus margin"><span class="div-centered"><i class="fa-solid fa-plus margin"></i> Ajouter</span></button>
						</div>
						<div id="propositions" class="margin div-centered column">
						</div>
					</div>
					
					<div class="panneau margin">
						<div class="margin">Programmé par Louis Syrepret et stylisé par Golto</div>
						<aside>Utiliser "Importer un classement" pour utiliser une liste déjà prédéterminée.</aside>
						<div class="column">
							<button onclick="tele()" class="gerer">Télécharger l'image</button>
							<input type="file" id="input" onchange="priseencharge()" hidden/>
							<button onclick="imp()" class="gerer">Importer un classement</button>
							<button onclick="exp()" class="gerer">Exporter le classement</button>
							<button onclick="rst()" class="gerer">Remettre à zéro</button>
							<button onclick="chgAxes()" class="gerer">Changer les axes</button><br>
						
						
							<input type="checkbox" id="axes" name="axes" onchange="revAxes()" class="margin"><label for="axes">Afficher les axes</label>
							<aside>Quand les axes sont affichés,<br> il n'est plus possible de modifier les positions.</aside>
							
							<input type="checkbox" id="sep" name="sep" onchange="revSep()" checked class="margin"><label for="sep">Divisions</label>
							
							<select id="style" onchange="styleStyle()" class="margin">
								<option>Double-degradé n°1</option>
								<option>Double-degradé n°2</option>
								<option>Vide</option>
							</select>

							<select id="points" onchange="stylePoints()" class="margin">
								<option>Petit disque</option>
								<option>Grand disque</option>
								<option>Cercle</option>
								<option>Carré</option>
								<option>Étoile</option>
							</select>

						</div>

					</div>
				</div>
			</div>
		
		<script>
			const cv = document.getElementById('c');
			cv.width = 500; cv.height = 500;
			const ctx = cv.getContext('2d');
			
			const classement = {
				points:[],
				style:{typefond:0, typepoints:0, axe1:"Axe 1", axe2:"Axe 2", axes:false, divisions:true}
			};
			
			function stylePoints() {
				classement.style.typepoints = document.getElementById('points').selectedIndex;
				afficherGraphe();
			}
			
			function styleStyle() {
				classement.style.typefond = document.getElementById('style').selectedIndex;
				afficherGraphe();
			}
			
			function revAxes() {
				classement.style.axes = document.getElementById('axes').checked;
				afficherGraphe();
			}
			
			function chgAxes() {
				classement.style.axe1 = prompt("Nom du premier axe :",classement.style.axe1);
				classement.style.axe2 = prompt("Nom du second axe :",classement.style.axe2);
				afficherGraphe();
			}
			
			function revSep() {
				classement.style.divisions = document.getElementById('sep').checked;
				afficherGraphe();
			}
			
			const affreuxRegEx = /{"points":\[({"x":[-.0-9]+,"y":[-.0-9]+,"t":"[^"]+","sh":"[^"]+","i":[0-9]+},*)+\],"donnees":\[({"nom":"[^"]+","court":"[^"]+","utilise":(false|true)},*)+\],"style":{"divisions":(true|false),"typefond":[0-9]+,"typepoints":[0-9]+,"axes":(false|true),"axe1":"[^"]+","axe2":"[^"]+"}}/gm;
			
			function imp() { document.getElementById("input").click(); }
			function priseencharge() {
				let prom = document.getElementById("input").files[0].text();
				prom.then(function(result){
					let val = JSON.parse(result);
					if(!affreuxRegEx.test(result)) { alert("Fichier dans un format incorrect !"); return; }
					donnees = val.donnees; classement.points = val.points; classement.style = val.style;
					afficherPropositions(); afficherGraphe();
				}, function(){});
			}
			
			function exp() {
				let lienVirtuel = document.createElement("a");
				let fichier = new Blob([JSON.stringify({"points":classement.points, "donnees":donnees, "style":classement.style})], {type: 'application/json'});
				lienVirtuel.href = URL.createObjectURL(fichier);
				lienVirtuel.download = 'TierList.json';
				lienVirtuel.click();
			}
			function rst() { if(confirm("Souhaitez-vous réellement remettre à zéro ?")) { classement.points = []; for(let i = 0; i<donnees.length; i++) { donnees[i].utilise = false; } afficherPropositions(); afficherGraphe(); } }
			
			function pointer(x,y,t,v,s) {
				if(v == 0) { ctx.fillStyle = 'black'; } 
				if(v == 1) { ctx.fillStyle = "red"; }
				if(v == 2) { ctx.fillStyle = "#ccc"; }
				if(s == 0) {
					ctx.beginPath();
					ctx.arc(x,y,5,0,2*Math.PI,false);
					ctx.fill();
					ctx.closePath();
				} else if(s == 1) {
					ctx.beginPath();
					ctx.arc(x,y,10,0,2*Math.PI,false);
					ctx.fill();
					ctx.closePath();
				} else if(s == 2) {
					ctx.strokeStyle = 'black'; ctx.lineWidth = 3;
					ctx.beginPath();
					ctx.arc(x,y,5,0,2*Math.PI,false);
					ctx.stroke();
					ctx.closePath();
				} else if(s == 3) {
					ctx.fillRect(x-5,y-5,10,10);
				} else if(s == 4) {
					ctx.beginPath();
					ctx.moveTo(x,y-10);
					for(let i = 0; i<5; i++) {
						ctx.lineTo(x-5*Math.sin(Math.PI/5*(2*i+1)), y-5*Math.cos(Math.PI/5*(2*i+1)));
						ctx.lineTo(x-10*Math.sin(Math.PI/5*(2*i+2)), y-10*Math.cos(Math.PI/5*(2*i+2)));
					}
					ctx.closePath();
					ctx.fill();
				}
				ctx.font = "bold 16px Arial"; ctx.strokeStyle = 'white'; ctx.lineWidth = 3; ctx.miterLimit = 2;
				if(y < 250) { ctx.textBaseline = 'top'; } else { ctx.textBaseline = 'bottom'; }
				if(x > 250) { ctx.textAlign = 'right'; ctx.strokeText(t, x-10, y); ctx.fillText(t,x-10,y); }
				else { ctx.textAlign = 'left'; ctx.strokeText(t, x+10, y); ctx.fillText(t,x+10,y); }
			}
			
			function fondTierList(m,n,p) {
				ctx.fillStyle = '#333'; ctx.fillRect(0,0,500,500);
				let rect = {x:0,y:0,w:500,h:500}; if(p) { rect = {x:30,y:30,w:470,h:470}; }
				for(let i = 0; i<m; i++) {
					for(let j = 0; j<n; j++) {
						let [r,g,b] = [255,255,255];
						if(classement.style.typefond == 0) {
							let [u,v] = [(i+0.5)/m,(j+0.5)/n];
							[r,g,b] = [150+100*v,150+100*u,150+100*Math.abs(u+v-1)];
						} else if(classement.style.typefond == 1) {
							let [u,v] = [(i+0.5)/m,(j+0.5)/n];
							[r,g,b] = [150+100*u*u,150+100*(u+v)/2,150+100*v*v];
						}
						ctx.fillStyle = 'rgb('+String(r)+','+String(g)+','+String(b)+')';
						ctx.fillRect(Math.round(rect.x+rect.w/m*i), Math.round(rect.y+rect.h/n*j),
									 Math.round(rect.x+rect.w/m*(i+1))-Math.round(rect.x+rect.w/m*i),
									 Math.round(rect.y+rect.h/n*(j+1))-Math.round(rect.y+rect.h/n*j));
					}
				}
				
				if(classement.style.divisions) {
					ctx.strokeStyle = '#aaa';
					ctx.lineWidth = 2;
					ctx.setLineDash([3,3]);

					for(let i = 1; i<m; i++) {
						ctx.beginPath();
						ctx.moveTo(rect.x+rect.w/m*i,rect.y);
						ctx.lineTo(rect.x+rect.w/m*i,rect.y+rect.h);
						ctx.stroke();
						ctx.closePath();
					}

					for(let j = 1; j<n; j++) {
						ctx.beginPath();
						ctx.moveTo(rect.x,       rect.y+rect.h/m*j);
						ctx.lineTo(rect.x+rect.w,rect.y+rect.h/m*j);
						ctx.stroke();
						ctx.closePath();
					}

					ctx.setLineDash([]);
				}
			}
			
			fondTierList(7,7,classement.style.axes);
			
			function afficherGraphe() {
				ctx.clearRect(0,0,500,500);
				fondTierList(7,7,classement.style.axes);
				if(classement.style.axes) {
					ctx.font = 'bold 24px Arial'; ctx.fillStyle = 'white';
					ctx.textBaseline = 'middle'; ctx.textAlign = 'center';
					ctx.fillText(classement.style.axe1,265,15);
					ctx.save();
					ctx.translate(15, 265);
					ctx.rotate(-Math.PI/2);
					ctx.textAlign = "center";
					ctx.fillText(classement.style.axe2,0,0);
					ctx.restore();
				}
				let dec = {x:250,y:250,w:250,h:250};
				if(classement.style.axes) { dec = {x:265, y:265, w:235, h:235}; }
				for(let i = 0; i<classement.points.length; i++) {
					let col = 0; if(classement.points[i].i == clicActif) { col = 2; }
					pointer(dec.x+dec.w*classement.points[i].x, dec.y+dec.h*classement.points[i].y, classement.points[i].sh, col, classement.style.typepoints);
				}
			}
			
			function dernierNom(n) { let m = n.split(" "); return m[m.length-1]; }
			
			let donnees = []; let clicActif = -1;
			
			function afficherPropositions() {
				let l = '<ul>';
				for(let i = 0; i<donnees.length; i++) {
					if(!donnees[i].utilise) {
						if(i == clicActif) { l += '<li class="click" onclick="selectionner('+String(i)+')">'+donnees[i].nom+'</li>'; }
						else { l += '<li onclick="selectionner('+String(i)+')">'+donnees[i].nom+'</li>'; }
					}
				}
				l += '</ul>';
				document.getElementById('propositions').innerHTML = l;
			}
			
			function ajt() {
				let val = document.getElementById('ajout').value;
				let court = prompt("Quel nom court donnez vous à \""+val+"\" ?",dernierNom(val));
				donnees.push({nom:val, court:court, utilise:false});
				afficherPropositions();
			}
			
			function selectionner(i) {
				clicActif = i;
				afficherPropositions();
			}
			
			function trouverClassementDe(numero) {
				let cl = -1;
				for(let i = 0; i<classement.points.length; i++) { if(classement.points[i].i == numero) { cl = i; break; } }
				return cl;
			}
			
			cv.addEventListener("mousedown", (event) => {
				if(classement.style.axes) { return ; }
				let [x,y] = [event.offsetX,event.offsetY];
				if(clicActif != -1) {
					if(!donnees[clicActif].utilise) {
						classement.points.push({x:(x-250)/250, y:(y-250)/250, t:donnees[clicActif].nom, sh:donnees[clicActif].court, i:clicActif});
					} else {
						let ix = trouverClassementDe(clicActif);
						classement.points[ix].x = (x-250)/250;
						classement.points[ix].y = (y-250)/250;
					}
					donnees[clicActif].utilise = true;
					clicActif = -1;
					afficherGraphe();
					afficherPropositions();
				} else {
					let index = -1;
					for(let i = 0; i<classement.points.length; i++) {
						let [px,py] = [classement.points[i].x*250+250,classement.points[i].y*250+250];
						if((x-px)*(x-px)+(y-py)*(y-py) <= 25) { index = i; }
					}
					if(index != -1) { clicActif = classement.points[index].i; }
				}
			}, false);
			
			cv.addEventListener("mousemove", (event) => {
				if(classement.style.axes) { return ; }
				if(clicActif != -1) {
					let [x,y] = [event.offsetX,event.offsetY];
					afficherGraphe();
					pointer(x,y,donnees[clicActif].nom,1,classement.style.typepoints);
				}
			}, false);
			
			function tele() {
				let lienVirtuel = document.createElement('a');
				lienVirtuel.setAttribute('download', 'TierList.png');
				lienVirtuel.setAttribute('href', cv.toDataURL("image/png").replace("image/png", "image/octet-stream"));
				lienVirtuel.click();
			}
		</script>

		</section>

<!--
		<section id="section6">
			<div class="div-centered" data-inviewport="slide">
				<h1>SECTION 5</h1>
			</div>
		</section>
-->
	</main>

	<!--  ========================================== FOOTER ==========================================  -->

	<footer>
		<div class="div-centered spacing">
			<a href="https://www.youtube.com/channel/UC3lRCtBb8ssim8FdTqZ-hug" target="_blank" title="Youtube's channel">
				<i class="fa-brands fa-youtube"></i>
			</a> 
			<a href="https://discord.gg/WnWpuHj5SA" target="_blank" title="Discord Server">
				<i class="fa-brands fa-discord"></i>
			</a>
		</div>
		<div class="div-centered small">
			Version p2.1.1 by Golto (FOUCAUD Guillaume)
		</div>
		<div class="div-centered small">
			© Tout droit réservé
		</div>
	</footer>
	
</div>
</body>

<!--  ========================================== SCRIPT : MathJax Updater ==========================================  -->

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js">
	MathJax.Hub.Config({
		extensions: ["mml2jax.js"],
		jax: ["input/MathML", "output/HTML-CSS"]
	});
</script>

<script>
	window.updateMaths = function (id) {
		if (typeof(id) != "string") return 0
		const element = document.getElementById(id)
		MathJax.Hub.Queue(["Typeset",MathJax.Hub,element]);
	}
</script>

<!--  ========================================== SCRIPT : THREEJS ==========================================  -->

	<!--<script src="https://threejs.org/examples/js/libs/ammo.wasm.js"></script>-->
	<!--<script src="https://threejs.org/build/three.module.js"></script>-->

	<!-- Import maps polyfill -->
	<!-- Remove this when import maps will be widely supported -->
	<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

	<script type="importmap">
		{
			"imports": {
				"three": "https://threejs.org/build/three.module.js",
				"three/addons/": "https://threejs.org/examples/jsm/"
			}
		}
	</script>

<!--  ========================================== SCRIPT : RENDERERS - Variables ==========================================  -->

<script type="text/javascript">
	let RENDERING = true;
	let RENDERERS_COUNT = 0;
</script>

<!--  ========================================== SCRIPT : MAIN RENDERER - background header ==========================================  -->


<script type="module">

	import * as THREE from 'three';

	let camera, scene, renderer;

	const clock = new THREE.Clock();
	const center = new THREE.Vector3( 0, 0, 0 );

	init();
	//render(); // remove when using next line for animation loop (requestAnimationFrame)
	animate();


	function init() {

		scene = new THREE.Scene();
		scene.fog = new THREE.FogExp2( 0xfaa7a7, 0.002 );//0xf4f4f4 si fond blanc // 0xfaa7a7 si fond coloré

		renderer = new THREE.WebGLRenderer( { antialias: true, alpha: true } );
		RENDERERS_COUNT ++
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );

		document.getElementById('renderer-main').appendChild( renderer.domElement );

		camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
		camera.position.set( 400, 200, 0 );

		// world

		const geometry = new THREE.BoxGeometry( 1, 1, 1 );
		geometry.translate( 0, 0.5, 0 );
		const material = new THREE.MeshPhongMaterial( { color: 0xff8c00, flatShading: true } );

		for ( let i = 0; i < 500; i ++ ) {

			const mesh = new THREE.Mesh( geometry, material );
			mesh.position.x = Math.random() * 1600 - 800;
			mesh.position.y = 0;
			mesh.position.z = Math.random() * 1600 - 800;
			mesh.scale.x = 30;
			mesh.scale.y = Math.random() * 80 + 10;
			mesh.scale.z = 20;
			mesh.updateMatrix();
			mesh.matrixAutoUpdate = false;
			scene.add( mesh );

		}

		// lights

		const dirLight1 = new THREE.DirectionalLight( 0xf4f4f4 );
		dirLight1.position.set( 1, 1, 3 );
		scene.add( dirLight1 );

		const dirLight2 = new THREE.DirectionalLight( 0x1f1f1f );
		dirLight2.position.set( - 1, - 1, - 1 );
		scene.add( dirLight2 );

		const ambientLight = new THREE.AmbientLight( 0x222222 );
		scene.add( ambientLight );

		//

		window.addEventListener( 'resize', onWindowResize );

	}

	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

	}

	function animate() {

		requestAnimationFrame( animate );

		if (RENDERING) {render();}
	}

	function render() {


		const angle = clock.getElapsedTime() * 0.04;
		camera.position.set(400*Math.cos(angle), 200, 400*Math.sin(angle));
		camera.lookAt(center);

		renderer.render( scene, camera );
	}

</script>

<!--  ========================================== SCRIPT : Algebren ==========================================  -->

<script type="module">


	//ALGEBREN WORLD
	import * as THREE from 'three';

	import { MapControls } from 'three/addons/controls/OrbitControls.js';

	import * as ALGEBREN from'./ThreeAlgebrenGraph.js';

	const rendererContainer = document.getElementById('renderer-world');

	let camera, controls, scene, renderer;

	const clock = new THREE.Clock();
	const center = new THREE.Vector3( 0, 0, 0 );


	// Set up the raycaster
	let raycaster = new THREE.Raycaster();

	// Get the mouse position
	let mouse = new THREE.Vector2();


	// Update the raycaster on mouse move
	rendererContainer.addEventListener('mousemove', onDocumentMouseMove, false);

	// Update the raycaster on mouse move
	rendererContainer.addEventListener('click', onDocumentMouseClick, false);

	// When the mouse moves, update the mouse position
	function onDocumentMouseMove(event) {
		mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
		mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
	}

	init();
	animate();


	// When the mouse clicks, update the mouse position
	function onDocumentMouseClick(event) {
		mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
		mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
		
		// Update the raycaster
		raycaster.setFromCamera(mouse, camera);

		// Find all objects intersected by the ray
		let intersects = raycaster.intersectObjects(scene.children);
		
		// Log the objects intersected
		console.log(intersects);

		if (intersects.length > 0) {
			let object = intersects[0].object;
			if (object.material.color.getHex() === ALGEBREN.Materials.red.color.getHex()) {
				object.material = ALGEBREN.Materials.blue;
			} else {
				object.material = ALGEBREN.Materials.red;
			}
		}
	}

	function init() {

		scene = new THREE.Scene();
		scene.fog = new THREE.FogExp2( 0xf4f4f4, 0.002 );//0xf4f4f4 si fond blanc // 0xfaa7a7 si fond coloré
		scene.background = new THREE.Color(0xf4f4f4);

		renderer = new THREE.WebGLRenderer( { antialias: true, alpha: false } );
		RENDERERS_COUNT ++
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );

		rendererContainer.appendChild( renderer.domElement );
		//renderer.domElement.style.position = 'absolute';

		camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
		camera.position.set( 400, 200, 0 );


		// Update the raycaster
		raycaster.setFromCamera(mouse, camera);

		// controls

		controls = new MapControls( camera, renderer.domElement );

		controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled
		controls.dampingFactor = 0.05;

		controls.screenSpacePanning = false;

		controls.minDistance = 100;
		controls.maxDistance = 500 * 10;

		controls.maxPolarAngle = Math.PI / 2;

		// world

		const LENGTH_GRID = 30
		const PARCEL_SIZE = 20;
		const TOWER_SIZE = 10;
		const RANDOM_OFFSET = 5;

		const grid = new THREE.Group();

		for ( let i = 0; i < LENGTH_GRID; i ++ ) {
		for ( let j = 0; j < LENGTH_GRID; j ++ ) {

			const mesh = new THREE.Mesh( ALGEBREN.Geometries.box, ALGEBREN.Materials.red );
			mesh.position.x = ALGEBREN.MathUtils.getRandomRange(RANDOM_OFFSET + i * PARCEL_SIZE , (i + 1) * PARCEL_SIZE - RANDOM_OFFSET);
			mesh.position.y = 0;
			mesh.position.z = ALGEBREN.MathUtils.getRandomRange(RANDOM_OFFSET + j * PARCEL_SIZE , (j + 1) * PARCEL_SIZE - RANDOM_OFFSET);

			mesh.scale.x = TOWER_SIZE;
			mesh.scale.y = 1;
			mesh.scale.z = TOWER_SIZE;
			mesh.updateMatrix();
			mesh.matrixAutoUpdate = false;
			grid.add( mesh );

		}}
		grid.position.x -= LENGTH_GRID * PARCEL_SIZE * .5;
		grid.position.z -= LENGTH_GRID * PARCEL_SIZE * .5;
		scene.add( grid );

		// lights

		const dirLight1 = new THREE.DirectionalLight( 0xf4f4f4 );
		dirLight1.position.set( 1, 1, 1 );
		scene.add( dirLight1 );

		const dirLight2 = new THREE.DirectionalLight( 0x1f1f00 );
		dirLight2.position.set( - 1, - 1, - 1 );
		scene.add( dirLight2 );

		const ambientLight = new THREE.AmbientLight( 0x222222 );
		scene.add( ambientLight );

		// Algebren

		window.addEventListener( 'resize', onWindowResize );

	}


	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

	}

	function animate() {

		requestAnimationFrame( animate );

		controls.update();

		if (RENDERING) {render();}
	}

	function render() {

		renderer.render( scene, camera );
	}
</script>


<!--  ========================================== SCRIPT : Menu hamburger toggler ==========================================  -->


<script>
	const menuHamburger = document.querySelector(".menu-hamburger")
	const navLinks = document.querySelector(".nav-links")

	menuHamburger.addEventListener('click',()=>{
		navLinks.classList.toggle('mobile-menu')
		menuHamburger.classList.toggle('mobile-menu')
	})
</script>

<!--  ========================================== SCRIPT : NavBar qui disparaît en scrollant ==========================================  -->


<script type="module">
	let previousScrollPos = 0;
	let nav = document.querySelector('nav');
	let navHeight = nav.offsetHeight;
	let timer;

	window.addEventListener('scroll', function(e) {
		let currentScrollPos = window.pageYOffset;

		if (currentScrollPos > navHeight && currentScrollPos > previousScrollPos) {
			nav.classList.add('hideNav');
			clearTimeout(timer);
		} else {
		nav.classList.remove('hideNav');
		}
	  
		previousScrollPos = currentScrollPos;
	});

	window.addEventListener('mousemove', function(e) {
		let currentY = e.clientY;
	  
		if (currentY > 100) {
			if (!nav.classList.contains('hideNav')) {
				timer = setTimeout(function() {
				nav.classList.add('hideNav');
				}, 1000);
			}
			
		} else {
			nav.classList.remove('hideNav');
			clearTimeout(timer);
		}
	});



	//bouton monde virtuel
	let BtnWorld = document.querySelector('.worldDisactivation');
	window.addEventListener('mousemove', function(e) {
		let currentX = e.clientX;
	  
		if (currentX < 200) {
			BtnWorld.classList.add('showBtnWorld');
			
		} else {
			BtnWorld.classList.remove('showBtnWorld');
		}
	});

</script>


<!--  ========================================== SCRIPT : IN-VIEWPORT ==========================================  -->

<script type="text/javascript">
	//Toggle animations when visible
	//https://stackoverflow.com/questions/27462306/css3-animate-elements-if-visible-in-viewport-page-scroll


	/*
	use data-inviewport="NAME" in HTML elements like that : <a data-inviewport="slide">example</a>
	
	use [data-inviewport="NAME"] in CSS like that :

	[data-inviewport="slide"] { 
		transition: 2s ease-out;
		opacity: 0.0;
		transform: translate(0, -20%);
	}
	[data-inviewport="slide"].is-inViewport { 
		opacity: 1.0; 
		transform: translate(0, 0);
	}
	*/

			const inViewport = (entries, observer) => {
			  entries.forEach(entry => {
				entry.target.classList.toggle("is-inViewport", entry.isIntersecting);
			  });
			};

			const Obs = new IntersectionObserver(inViewport);
			const obsOptions = {}; //See: https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#Intersection_observer_options

			// Attach observer to every [data-inviewport] element:
			const ELs_inViewport = document.querySelectorAll('[data-inviewport]');
			ELs_inViewport.forEach(EL => {
			  Obs.observe(EL, obsOptions);
			});
		</script>

</html>